<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Buy Numbers - PrimeSmsHub</title>
<link rel="stylesheet" href="style.css">
<link rel="stylesheet" href="css/pages.css">
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;background:#f8f9fa;color:#333}
.header{display:flex;justify-content:space-between;align-items:center;background:#fff;padding:15px 20px;box-shadow:0 2px 8px rgba(0,0,0,.1);position:sticky;top:0;z-index:100}
.header .logo img{width:120px}
.header-right{display:flex;align-items:center;gap:15px}
.menu-icon{font-size:24px;cursor:pointer;display:none}
.wallet-btn{background:#0024ff;color:#fff;padding:10px 15px;border:none;border-radius:6px;font-weight:600;cursor:pointer;font-size:14px}
.wallet-btn:hover{background:#0020cc}

.sidebar{position:fixed;top:0;left:0;width:280px;height:100vh;background:#fff;box-shadow:2px 0 10px rgba(0,0,0,.08);transform:translateX(-100%);transition:.3s;z-index:2000;overflow-y:auto;padding-top:10px}
.sidebar.open{transform:translateX(0)}
.sidebar .close-btn{display:none;font-size:24px;cursor:pointer;padding:10px 20px;color:#333}
.sidebar .close-btn.show{display:block}
.sidebar nav ul{list-style:none}
.sidebar nav li{margin:5px 0}
.sidebar nav a{display:flex;align-items:center;gap:12px;padding:12px 20px;color:#333;text-decoration:none;transition:.2s;font-weight:500}
.sidebar nav a:hover,.sidebar nav a.active{background:#f0f4ff;color:#0024ff;border-left:3px solid #0024ff;padding-left:17px}
.sidebar .badge{background:#e9eefc;color:#0024ff;padding:2px 8px;border-radius:12px;font-size:12px;margin-left:auto}

.overlay{position:fixed;inset:0;background:rgba(0,0,0,.4);opacity:0;visibility:hidden;transition:.2s;z-index:1500}
.overlay.show{opacity:1;visibility:visible}

.container{padding:20px;margin-left:0;transition:.3s;max-width:600px;margin:0 auto}
.container.sidebar-open{margin-left:280px}

.hero{background:linear-gradient(135deg,#0024ff 0%,#0047cc 100%);color:#fff;padding:40px 20px;border-radius:16px;margin-bottom:30px;text-align:center;box-shadow:0 10px 30px rgba(0,36,255,.2)}
.hero h1{font-size:28px;margin-bottom:10px;font-weight:700}
.hero p{font-size:16px;opacity:.95}

.card{background:#fff;padding:30px;border-radius:16px;box-shadow:0 10px 30px rgba(0,36,255,.1),0 0 0 1px rgba(0,36,255,.05);margin-bottom:20px;transition:all .3s cubic-bezier(.4,0,.2,1);border:1px solid rgba(0,36,255,.1);position:relative;overflow:hidden}
.card::before{content:'';position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(90deg,#0024ff,#0047cc);opacity:0;transition:opacity .3s ease}
.card:hover{transform:translateY(-8px);box-shadow:0 20px 40px rgba(0,36,255,.15),0 0 0 1px rgba(0,36,255,.1)}
.card:hover::before{opacity:1}
.card h3{color:#0024ff;margin-bottom:15px;font-weight:600;font-size:18px}
.success-card{background:linear-gradient(135deg,#f0fdf4 0%,#dbeafe 100%);padding:30px;border-radius:16px;box-shadow:0 10px 30px rgba(16,185,129,.1),0 0 0 1px rgba(16,185,129,.2);margin-bottom:20px;border:1px solid rgba(16,185,129,.3);position:relative;overflow:hidden;animation:slideDown .4s ease}
.success-card::before{content:'';position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(90deg,#10b981,#059669)}
.success-card h3{color:#10b981;font-size:20px;margin-bottom:15px;font-weight:700}
.success-card p{color:#047857;margin:8px 0;line-height:1.6}
@keyframes slideDown{from{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}
.form-group{margin-bottom:20px}
.form-group label{display:block;margin-bottom:8px;font-weight:600;color:#333;font-size:14px}
.form-group input,.form-group select{width:100%;padding:12px 14px;border:2px solid #e5e7eb;border-radius:10px;font-size:14px;font-family:inherit;transition:all .3s ease;background:#fff}
.form-group input:focus,.form-group select:focus{outline:none;border-color:#0024ff;box-shadow:0 0 0 3px rgba(0,36,255,.1)}
.form-group input:hover,.form-group select:hover{border-color:#0024ff;box-shadow:0 4px 12px rgba(0,36,255,.08)}
.form-group input::placeholder{color:#9ca3af}
.form-group input:read-only{background:#f9fafb;cursor:not-allowed}
.btn{background:linear-gradient(135deg,#0024ff 0%,#0047cc 100%);color:#fff;padding:14px 28px;border:none;border-radius:10px;font-weight:600;cursor:pointer;font-size:15px;transition:all .3s ease;width:100%;box-shadow:0 4px 12px rgba(0,36,255,.2)}
.btn:hover{transform:translateY(-2px);box-shadow:0 8px 20px rgba(0,36,255,.3)}
.btn:active{transform:translateY(0)}

@media(max-width:768px){
  .container{padding:15px}
  .menu-icon{display:block}
  .hero h1{font-size:24px}
}

::-webkit-scrollbar{width:6px}
::-webkit-scrollbar-track{background:#f1f1f1;border-radius:10px}
::-webkit-scrollbar-thumb{background:#0024ff;border-radius:10px}
</style>
</head>

<body>

<div class="header">
  <div class="menu-icon" id="menuIcon">‚ò∞</div>
  <div class="logo"><img src="hero.png" alt="PrimeSmsHub"></div>
  <div class="header-right">
    <button class="wallet-btn" id="walletBtn">Wallet: $0.00</button>
  </div>
</div>

<!-- SIDEBAR -->
<aside class="sidebar" id="sidebar">
  <div class="close-btn" id="closeBtn">‚úï</div>
  <nav>
    <ul>
      <li><a href="dashboard.html"><span>üè†</span>Dashboard</a></li>
      <li><a href="buy-numbers.html" class="active"><span>üì±</span>Buy Numbers</a></li>
      <li><a href="usa-numbers.html"><span>üá∫üá∏</span>USA Numbers</a></li>
      <li><a href="my-orders.html"><span>üì¶</span>My Orders</a></li>
      <li><a href="transactions.html"><span>üí≥</span>My Transactions</a></li>
      <li><a href="support.html"><span>‚ùì</span>Support</a></li>
      <li><a href="#" id="logoutBtn"><span>üö™</span>Logout</a></li>
    </ul>
  </nav>
</aside>

<div class="overlay" id="overlay"></div>

<!-- MAIN CONTENT -->
<div class="container" id="container">
  <div class="hero">
    <h1>üì± Buy Phone Numbers</h1>
    <p>Purchase virtual phone numbers for verification services</p>
  </div>

  <!-- BUY NUMBER FORM -->
  <div class="card">
    <h3>üì± Buy Virtual Number</h3>
    <form id="buyForm">
      <div class="form-group">
        <label for="country">Select Country</label>
        <select id="country" required onchange="handleCountryChange()">
          <option value="">-- Choose Country --</option>
        </select>
      </div>
      
      <div class="form-group">
        <label for="service">Select Service</label>
        <select id="service" required onchange="handleServiceChange()">
          <option value="">-- Choose Service --</option>
        </select>
      </div>
      
      <div class="form-group">
        <label>Price</label>
        <input type="text" id="price" readonly placeholder="Select country and service">
      </div>
      
      <button type="submit" class="btn" id="buyBtn">Buy Now</button>
    </form>
  </div>

  <!-- PURCHASE SUCCESS RESULT -->
  <div id="successResult" style="display:none;"></div>
</div>

<script type="module">
// Define BACKEND_URL at the top of the module
const BACKEND_URL = 'https://smshub-ftgg.onrender.com'
console.log('[Config] Backend URL:', BACKEND_URL)

import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-auth.js";
import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyCIK3C5qAOUZUtUixX1knFRSkXAYXOCDaA",
  authDomain: "primesmshub-c0f58.firebaseapp.com",
  projectId: "primesmshub-c0f58"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

const $ = id => document.getElementById(id);
const menuIcon=$("menuIcon"), sidebar=$("sidebar"), overlay=$("overlay"), closeBtn=$("closeBtn");
const walletBtn=$("walletBtn"), logoutBtn=$("logoutBtn");

menuIcon.onclick=()=>{
  sidebar.classList.add("open");
  overlay.classList.add("show");
  closeBtn.classList.add("show");
};

closeBtn.onclick=overlay.onclick=()=>{
  sidebar.classList.remove("open");
  overlay.classList.remove("show");
  closeBtn.classList.remove("show");
};

sidebar.querySelectorAll("a").forEach(link=>{
  link.onclick=()=>{
    sidebar.classList.remove("open");
    overlay.classList.remove("show");
    closeBtn.classList.remove("show");
  };
});

onAuthStateChanged(auth, async user=>{
  if(!user) return location.href="login.html";
  const snap=await getDoc(doc(db,"users",user.uid));
  walletBtn.innerText=`Wallet: $${(snap.data().wallet||0).toFixed(2)}`;
});

logoutBtn.onclick=()=>signOut(auth);
</script>

<script src="js/utils.js"></script>
<script src="js/buy-number.js"></script>

</body>
</html>
